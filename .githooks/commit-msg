#!/bin/sh

commit_msg_file="$1"
commit_msg="$(cat "$commit_msg_file")"

pattern='^(feat|fix|chore|docs|refactor|test|ci|perf)(\([a-zA-Z0-9_-]+\))?: .+'

if ! echo "$commit_msg" | grep -Eq "$pattern"; then
  echo ""
  echo "‚ùå Invalid commit message."
  echo ""
  echo "Expected format:"
  echo "  feat: short description"
  echo "  fix(auth): handle token expiration"
  echo ""
  echo "Allowed types:"
  echo "  feat, fix, chore, docs, refactor, test, ci, perf"
  echo ""
  exit 1
fi
